/**
 * HugeRTE version 1.0.6 (2024-12-20)
 * Copyright (c) 2022 Ephox Corporation DBA Tiny Technologies, Inc.
 * Copyright (c) 2024 HugeRTE contributors
 * Licensed under the MIT license (https://github.com/hugerte/hugerte/blob/main/LICENSE.TXT)
 * This file bundles the code of DOMPurify, which is dual-licensed under the Mozilla Public License v2.0 and the Apache License, Version 2.0, meaning you can use it under either one of those licenses.
 * Copyright 2024 Dr.-Ing. Mario Heiderich, Cure53
 * The code of DOMPurify included in this file has been modified. The latest original code of DOMPurify can be found at https://github.com/cure53/DOMPurify.
 */
!function(){"use strict";var t=hugerte.util.Tools.resolve("hugerte.PluginManager");const s=(t,s,e)=>{t.dom.toggleClass(t.getBody(),"mce-visualblocks"),e.set(!e.get()),((t,s)=>{t.dispatch("VisualBlocks",{state:s})})(t,e.get())},e=("visualblocks_default_state",t=>t.options.get("visualblocks_default_state"));const o=(t,s)=>e=>{e.setActive(s.get());const o=t=>e.setActive(t.state);return t.on("VisualBlocks",o),()=>t.off("VisualBlocks",o)};t.add("visualblocks",((t,l)=>{(t=>{(0,t.options.register)("visualblocks_default_state",{processor:"boolean",default:!1})})(t);const a=(t=>{let s=!1;return{get:()=>s,set:t=>{s=t}}})();((t,e,o)=>{t.addCommand("mceVisualBlocks",(()=>{s(t,0,o)}))})(t,0,a),((t,s)=>{const e=()=>t.execCommand("mceVisualBlocks");t.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:e,onSetup:o(t,s)}),t.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:e,onSetup:o(t,s)})})(t,a),((t,o,l)=>{t.on("PreviewFormats AfterPreviewFormats",(s=>{l.get()&&t.dom.toggleClass(t.getBody(),"mce-visualblocks","afterpreviewformats"===s.type)})),t.on("init",(()=>{e(t)&&s(t,0,l)}))})(t,0,a)}))}();